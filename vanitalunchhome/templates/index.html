<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vanita Lunch Home - Authentic Home Style Food</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='landing.css') }}">
</head>
<body class="bg-gray-50 text-gray-800 font-inter antialiased">

    <div id="landing-page" class="relative min-h-screen flex flex-col">
        
        <div class="absolute inset-0 z-0 overflow-hidden">
            <div class="absolute inset-0 bg-black/60 z-10"></div>
            <img src="https://images.unsplash.com/photo-1540189549336-e6e99c3679fe?q=80&w=2574&auto=format&fit=crop" 
                 alt="Delicious Food" 
                 class="w-full h-full object-cover animate-zoom-slow">
        </div>

        <nav class="relative z-20 w-full px-6 py-4 flex justify-between items-center text-white">
            <div class="flex items-center gap-2">
                <i data-lucide="utensils-crossed" class="h-6 w-6 text-orange-500"></i>
                <span class="text-xl font-bold tracking-tight">Vanita Lunch Home</span>
            </div>
            <div class="hidden md:flex gap-6 text-sm font-medium">
                <button onclick="scrollToSection('about')" class="hover:text-orange-400 transition">About</button>
                <button onclick="scrollToSection('contact')" class="hover:text-orange-400 transition">Contact</button>
            </div>
            <div class="flex gap-3">
                <button onclick="showAuthModal('login')" class="px-4 py-2 rounded-lg text-white hover:bg-white/20 transition backdrop-blur-sm">Log in</button>
                <button onclick="showAuthModal('register')" class="px-4 py-2 bg-orange-600 rounded-lg text-white hover:bg-orange-700 transition shadow-lg shadow-orange-600/30">Sign up</button>
            </div>
        </nav>

        <main class="relative z-20 flex-grow flex flex-col items-center justify-center text-center px-4">
            <h1 class="font-playfair text-5xl md:text-7xl font-bold text-white mb-6 leading-tight drop-shadow-lg">
                Discover the best food <br/> in your city
            </h1>
            <p class="text-gray-200 text-lg md:text-xl mb-10 max-w-2xl font-light">
                Authentic home-style meals delivered to your doorstep. Fresh, hygienic, and delicious.
            </p>
            
            <div class="w-full max-w-3xl bg-white p-2 rounded-xl shadow-2xl flex flex-col md:flex-row gap-2 transform transition-all hover:scale-[1.01]">
                <div class="flex-grow relative flex items-center px-4 border-b md:border-b-0 md:border-r border-gray-200">
                    <i data-lucide="map-pin" class="text-orange-500 h-5 w-5 mr-3"></i>
                    <input type="text" placeholder="Kamothe, Navi Mumbai" class="w-full py-3 outline-none text-gray-700 bg-transparent" readonly>
                </div>
                <div class="flex-grow-[2] relative flex items-center px-4">
                    <i data-lucide="search" class="text-gray-400 h-5 w-5 mr-3"></i>
                    <input type="text" placeholder="Search for dishes, thalis..." class="w-full py-3 outline-none text-gray-700 bg-transparent">
                </div>
                <button onclick="showApp()" class="bg-orange-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-orange-700 transition">Order Now</button>
            </div>
        </main>

        <div class="relative z-20 bg-white border-b py-6 hidden md:block">
            <div class="container mx-auto flex justify-center gap-12 text-gray-600">
                <div class="flex items-center gap-3"><div class="p-2 bg-orange-100 rounded-full text-orange-600"><i data-lucide="truck"></i></div><span>Fast Delivery</span></div>
                <div class="flex items-center gap-3"><div class="p-2 bg-green-100 rounded-full text-green-600"><i data-lucide="shield-check"></i></div><span>100% Hygienic</span></div>
                <div class="flex items-center gap-3"><div class="p-2 bg-blue-100 rounded-full text-blue-600"><i data-lucide="wallet"></i></div><span>Affordable Prices</span></div>
            </div>
        </div>
    </div>

    <div id="main-app" class="hidden min-h-screen flex flex-col bg-gray-50">
        
        <header class="bg-white shadow-sm sticky top-0 z-30">
            <nav class="container mx-auto px-4 lg:px-8">
                <div class="flex items-center justify-between h-16">
                    <div class="flex items-center gap-3">
                        <div class="bg-orange-500 p-1.5 rounded-lg text-white">
                            <i data-lucide="utensils-crossed" class="h-6 w-6"></i>
                        </div>
                        <h1 class="text-xl font-bold text-gray-800 hidden sm:block">Vanita Lunch Home</h1>
                    </div>
                    
                    <div class="flex items-center gap-4">
                        <div class="hidden md:flex items-center bg-gray-100 rounded-lg px-3 py-1.5">
                            <i data-lucide="map-pin" class="h-4 w-4 text-orange-500 mr-2"></i>
                            <span id="user-location-display" class="text-sm font-medium text-gray-700 truncate max-w-[150px]">Select Location</span>
                        </div>

                        <div class="relative group">
                            <button class="flex items-center gap-2 hover:bg-gray-100 p-2 rounded-lg transition">
                                <div class="h-8 w-8 bg-orange-100 text-orange-600 rounded-full flex items-center justify-center font-bold" id="user-avatar">U</div>
                                <span id="user-name-display" class="text-sm font-medium hidden sm:block">User</span>
                                <i data-lucide="chevron-down" class="h-4 w-4 text-gray-400"></i>
                            </button>
                            <div class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl py-2 hidden group-hover:block border border-gray-100">
                                <a href="#" onclick="logoutUser()" class="block px-4 py-2 text-sm text-red-600 hover:bg-red-50">Log Out</a>
                            </div>
                        </div>

                        <button id="cartBtn" class="relative p-2 text-gray-600 hover:text-orange-600 transition">
                            <i data-lucide="shopping-cart" class="h-6 w-6"></i>
                            <span id="cartCount" class="absolute -top-1 -right-1 h-5 w-5 bg-orange-600 text-white text-xs font-bold rounded-full flex items-center justify-center hidden shadow-sm">0</span>
                        </button>
                    </div>
                </div>
            </nav>
        </header>

        <main class="container mx-auto p-4 lg:p-8 flex-grow">
            <div class="mb-8 overflow-x-auto pb-2 scrollbar-hide">
                <div class="flex gap-3 min-w-max">
                    <button class="category-filter active px-5 py-2.5 rounded-full text-sm font-semibold transition shadow-sm border border-transparent bg-orange-600 text-white" data-category="all">All Items</button>
                    <button class="category-filter px-5 py-2.5 rounded-full text-sm font-medium bg-white text-gray-600 border border-gray-200 hover:border-orange-500 hover:text-orange-600 transition shadow-sm" data-category="Main Course">Main Course</button>
                    <button class="category-filter px-5 py-2.5 rounded-full text-sm font-medium bg-white text-gray-600 border border-gray-200 hover:border-orange-500 hover:text-orange-600 transition shadow-sm" data-category="Starters">Starters</button>
                    <button class="category-filter px-5 py-2.5 rounded-full text-sm font-medium bg-white text-gray-600 border border-gray-200 hover:border-orange-500 hover:text-orange-600 transition shadow-sm" data-category="Beverages">Beverages</button>
                </div>
            </div>

            <div id="menu-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                </div>
        </main>
    </div>

    <div id="auth-modal" class="fixed inset-0 bg-black/60 backdrop-blur-sm z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden relative animate-pop">
            <button onclick="closeAuthModal()" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600"><i data-lucide="x"></i></button>
            
            <div id="login-form" class="p-8">
                <h2 class="text-3xl font-bold mb-2 text-gray-800">Login</h2>
                <p class="text-gray-500 mb-6 text-sm">Enter your details to continue ordering.</p>
                <form onsubmit="handleLogin(event)">
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Email or Mobile</label>
                            <input type="text" id="login-username" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 outline-none transition" placeholder="john@example.com">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Password</label>
                            <input type="password" id="login-password" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 outline-none transition" placeholder="••••••••">
                        </div>
                        <button type="submit" class="w-full bg-orange-600 text-white font-bold py-3.5 rounded-lg hover:bg-orange-700 transition shadow-lg shadow-orange-500/30">Log In</button>
                    </div>
                </form>
                <p class="mt-6 text-center text-gray-600 text-sm">
                    New to Vanita Lunch Home? 
                    <button onclick="switchAuthTab('register')" class="text-orange-600 font-semibold hover:underline">Create account</button>
                </p>
            </div>

            <div id="register-form" class="p-8 hidden">
                <h2 class="text-2xl font-bold mb-2 text-gray-800">Sign up</h2>
                <p class="text-gray-500 mb-6 text-sm">Create an account to start ordering.</p>
                <form onsubmit="handleRegister(event)">
                    <div class="space-y-3">
                        <input type="text" id="reg-name" required placeholder="Full Name" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 outline-none">
                        <input type="text" id="reg-mobile" required placeholder="Mobile Number (10 digits)" pattern="[0-9]{10}" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 outline-none">
                        <input type="email" id="reg-email" placeholder="Email Address (Optional)" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 outline-none">
                        <input type="password" id="reg-password" required placeholder="Password" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 outline-none">
                        
                        <div class="relative">
                            <textarea id="reg-address" rows="2" placeholder="Delivery Address" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 outline-none pr-12"></textarea>
                            <button type="button" onclick="detectLocation('reg-address')" class="absolute bottom-2 right-2 text-orange-600 hover:text-orange-700 p-1 rounded-md hover:bg-orange-50 transition" title="Detect My Location">
                                <i data-lucide="crosshair" class="h-5 w-5"></i>
                            </button>
                        </div>
                        <input type="hidden" id="reg-lat">
                        <input type="hidden" id="reg-lng">
                        
                        <div class="bg-gray-50 p-3 rounded-lg">
                            <p class="text-sm font-medium text-gray-700 mb-2">Receive OTP via:</p>
                            <div class="flex gap-4">
                                <label class="flex items-center gap-2 cursor-pointer">
                                    <input type="radio" name="otp-method" value="whatsapp" checked class="text-orange-600 focus:ring-orange-500">
                                    <span class="flex items-center gap-1 text-sm">
                                        <svg class="h-4 w-4 text-green-600" viewBox="0 0 24 24" fill="currentColor"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>
                                        WhatsApp
                                    </span>
                                </label>
                                <label class="flex items-center gap-2 cursor-pointer opacity-50" title="SMS coming soon">
                                    <input type="radio" name="otp-method" value="sms" disabled class="text-orange-600 focus:ring-orange-500">
                                    <span class="flex items-center gap-1 text-sm">
                                        <i data-lucide="message-square" class="h-4 w-4"></i>
                                        SMS <span class="text-xs text-gray-400">(Coming soon)</span>
                                    </span>
                                </label>
                            </div>
                        </div>
                        
                        <button type="submit" class="w-full bg-orange-600 text-white font-bold py-3.5 rounded-lg hover:bg-orange-700 transition shadow-lg shadow-orange-500/30">Send OTP</button>
                    </div>
                </form>
                <p class="mt-4 text-center text-gray-600 text-sm">
                    Already have an account? 
                    <button onclick="switchAuthTab('login')" class="text-orange-600 font-semibold hover:underline">Log in</button>
                </p>
            </div>

            <div id="otp-form" class="p-8 hidden text-center">
                <div class="mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4 text-green-600">
                    <svg class="h-8 w-8" viewBox="0 0 24 24" fill="currentColor"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>
                </div>
                <h2 class="text-2xl font-bold mb-2">Verify Mobile</h2>
                <p class="text-gray-500 mb-2 text-sm">We've sent a verification code via WhatsApp to</p>
                <p id="otp-mobile-display" class="font-semibold text-gray-800 mb-4">your mobile</p>
                
                <form onsubmit="handleVerifyOTP(event)">
                    <input type="text" id="otp-input" required placeholder="Enter 6-digit OTP" maxlength="6" class="w-full px-4 py-3 text-center text-2xl tracking-widest border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 outline-none mb-4 font-mono">
                    <button type="submit" class="w-full bg-green-600 text-white font-bold py-3.5 rounded-lg hover:bg-green-700 transition">Verify & Continue</button>
                </form>
                
                <div class="mt-4 space-y-2">
                    <p class="text-sm text-gray-500">Didn't receive the code?</p>
                    <button onclick="resendOTP()" id="resend-otp-btn" class="text-sm text-orange-600 font-semibold hover:underline">Resend OTP</button>
                </div>
                
                <button onclick="switchAuthTab('register')" class="mt-4 text-sm text-gray-500 hover:text-gray-700">Wrong number? Go back</button>
            </div>

        </div>
    </div>

    <div id="cartOverlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden transition-opacity"></div>
    <div id="cartSidebar" class="fixed top-0 right-0 bottom-0 w-full max-w-md bg-white shadow-2xl z-50 transform translate-x-full transition-transform duration-300 ease-in-out flex flex-col">
        <div class="flex items-center justify-between p-5 border-b bg-gray-50">
            <h2 class="text-xl font-bold text-gray-800">Your Cart</h2>
            <button id="closeCartBtn" class="p-2 rounded-full hover:bg-gray-200 text-gray-500"><i data-lucide="x" class="h-6 w-6"></i></button>
        </div>
        
        <div id="cart-page-items-container" class="flex-grow overflow-y-auto p-5 space-y-4">
                </div>
        
        <div class="p-6 border-t bg-white shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)]">
            <div id="cart-page-summary" class="space-y-3 mb-6 text-sm text-gray-600">
                </div>
            
            <div class="border-t border-dashed border-gray-300 pt-4">
                <h4 class="font-semibold mb-3 text-gray-800 flex items-center gap-2">
                    <i data-lucide="map-pin" class="h-4 w-4 text-orange-500"></i> Delivery Details
                </h4>
                <form id="checkoutForm" class="space-y-3">
                    <div class="grid grid-cols-2 gap-3">
                        <input type="text" id="checkout-name" readonly class="w-full px-3 py-2 border rounded-md bg-gray-50 text-gray-500 cursor-not-allowed text-sm">
                        <input type="tel" id="checkout-mobile" readonly class="w-full px-3 py-2 border rounded-md bg-gray-50 text-gray-500 cursor-not-allowed text-sm">
                    </div>
                    
                    <div class="relative">
                        <textarea id="checkout-address" required rows="2" class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-1 focus:ring-orange-500 outline-none pr-10" placeholder="Confirm Delivery Address"></textarea>
                        <button type="button" onclick="detectLocation('checkout-address')" class="absolute bottom-2 right-2 text-orange-600 hover:text-orange-700 p-1 rounded-md hover:bg-orange-50 transition" title="Detect My Location">
                            <i data-lucide="crosshair" class="h-5 w-5"></i>
                        </button>
                    </div>
                    
                    <button type="submit" id="payNowBtn" class="w-full mt-2 bg-orange-600 text-white font-bold py-3 rounded-lg hover:bg-orange-700 transition flex items-center justify-center gap-2 shadow-lg shadow-orange-500/30">
                        <span>Place Order</span>
                        <i data-lucide="arrow-right" class="h-4 w-4"></i>
                    </button>
                </form>
            </div>
        </div>
    </div>

    <div id="toast" class="hidden fixed bottom-6 right-6 bg-gray-800 text-white px-6 py-4 rounded-xl shadow-2xl flex items-center gap-3 z-[60] animate-slide-up">
        <i data-lucide="info" class="h-5 w-5 text-orange-400"></i>
        <p id="toast-message" class="font-medium"></p>
    </div>

    <script src="{{ url_for('static', filename='customer.js') }}"></script>
</body>
</html>
